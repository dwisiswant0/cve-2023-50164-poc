package utils

import (
	"io"
	"os"
	"strings"

	"net/url"
	"path/filepath"
)

func CopyFile(src, dst string) error {
	s, err := os.Open(src)
	if err != nil {
		return err
	}
	defer s.Close()

	d, err := os.Create(dst)
	if err != nil {
		return err
	}
	defer d.Close()

	_, err = io.Copy(d, s)
	if err != nil {
		return err
	}

	return nil
}

func Traverse(n int) string {
	// NOTE(dwisiswant0): the explicit use of a forward slash ("/") is preferred over
	// utilizing `filepath.Separator` because of the inclusion of the `--windows` flag.
	// This approach avoids adding a new flag for multiple OSs when utilizing the
	// runtime separator.
	return strings.Repeat("../", n)
}

func GetBasename(f string) []string {
	n := filepath.Base(f)
	e := filepath.Ext(n)

	return []string{n[:len(n)-len(e)], e}
}

func ParseURL(u string) error {
	_, err := url.Parse(u)
	return err
}
