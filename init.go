package main

import (
	"flag"
	"fmt"
	"os"
	"time"

	"log/slog"

	"github.com/lmittmann/tint"
	"github.com/mattn/go-colorable"
)

func init() {
	log = slog.New(
		tint.NewHandler(colorable.NewColorableStderr(), &tint.Options{
			Level:      slog.LevelDebug,
			TimeFormat: time.Kitchen,
			NoColor:    false,
		}),
	)

	opt = new(options)

	flag.StringVar(&opt.URL, "u", "", "")
	flag.StringVar(&opt.URL, "url", "", "")

	flag.StringVar(&opt.File, "f", "", "")
	flag.StringVar(&opt.File, "file", "", "")

	flag.IntVar(&opt.TraverseSeq, "t", 0, "")
	flag.IntVar(&opt.TraverseSeq, "traverse-seq", 0, "")

	flag.StringVar(&opt.Path, "p", "", "")
	flag.StringVar(&opt.Path, "path", "", "")

	flag.BoolVar(&opt.Windows, "w", false, "")
	flag.BoolVar(&opt.Windows, "win", false, "")
	flag.BoolVar(&opt.Windows, "windows", false, "")

	flag.Usage = func() {
		fmt.Fprintf(os.Stderr, "%s\n", usage)
	}
	flag.Parse()

	fmt.Fprintf(os.Stderr, "%s\n", banner)
}
